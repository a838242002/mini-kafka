# Repository Guidelines

## Project Structure & Module Organization
- `Cargo.toml` defines a Rust workspace with library crates under `crates/` and a binary entrypoint under `bin/`.
- `crates/common`, `crates/protocol`, `crates/storage`, `crates/broker`, and `crates/net` each contain a `src/lib.rs`.
- `bin/broker/src/main.rs` is the executable entrypoint that starts the broker service.
- Build artifacts go to `target/` (generated by Cargo).

## Build, Test, and Development Commands
- `cargo build` builds all workspace crates.
- `cargo test` runs all unit tests across the workspace.
- `cargo run -p broker-bin` builds and runs the broker binary (binds to `127.0.0.1:9092`).
- `cargo build -p <crate>` builds a single crate, e.g. `cargo build -p net`.

## Coding Style & Naming Conventions
- Rust 2024 edition is used across crates; follow standard Rust formatting (4-space indentation) and naming (snake_case for functions/modules, CamelCase for types).
- Use `cargo fmt` to apply rustfmt defaults if formatting changes are needed.
- Keep public API names consistent across crates (e.g., `protocol`, `storage`, `net`).

## Testing Guidelines
- Tests use the built-in Rust test framework with `#[test]` modules inside each crateâ€™s `lib.rs`.
- Name tests descriptively (e.g., `it_works`, `parses_request_header`) and keep unit tests close to the code under test.
- Run targeted tests with `cargo test -p <crate>` for faster feedback.

## Commit & Pull Request Guidelines
- No Git history is available in this repository, so there are no established commit message conventions yet.
- Prefer short, imperative commit subjects (e.g., "Add request parser") and include context in the body when needed.
- For pull requests, include a brief summary, testing notes (commands run), and any relevant issue links.

## Configuration & Runtime Notes
- The broker currently listens on `127.0.0.1:9092`; update `bin/broker/src/main.rs` to change defaults.
- Async runtime usage is via Tokio; keep async boundaries clear when adding network or storage features.
